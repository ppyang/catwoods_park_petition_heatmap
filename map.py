from gmplot import gmplot
import googlemaps
import re
import random
import geopy.distance as distance


postcodes = ['K7P 0B6',
'K7P1Y9',
'K7P0C1',
'K7P0L9',
'K7P0L9',
'K7P 3G4',
'K7P1K4',
'K7P 3K6',
'K7P 3H4',
'K7p3g3 ',
'K7p2h8 ',
'K7P3K5',
'K7P3k6',
'K7P3H5 ',
'K7P 2H8',
'k7p2p9',
'K7P 2E9',
'K7P 2G9',
'K7L 5H6',
'K7p 2w2',
'K7p3g4 ',
'K7P2L3',
'K7P 2H9',
'K7p2h2',
'K7P 0C1',
'K0H 1Y0',
'K7p2w1',
'K7p 0k7',
'K7P 2Y9',
'K7p1k4',
'K7P 2W2',
'K7P2W2 ',
'K7P 0B6',
'K7P 3K6',
'K7P0B7',
'K7P 0C1',
'K7P0J3',
'K7P3K6',
'K7p3h4 ',
'K7P3H2',
'K7P 2G3',
'K7P 2G3',
'K7p2p9',
'K7P 1R6',
'K7P3K6',
'K7p0m8',
'K7P 2H2',
'K7P 2G6',
'K7P 2H2',
'K7P 3K6',
'K7P1Z7',
'K7P 2H9',
'K7p2h9',
'K7P 2H8 ',
'K7P 0E8',
'K7p 1k4',
'K7P 3K6',
'K7P1N1',
'K7P2A5',
'K7P 1L1',
'K0E1N0',
'K0H2H0',
'K7M0A6',
'K0E1N0',
'K7p2w3 ',
'K7P3h5 ',
'K7N1T4',
'K7p1k9',
'K7P 3K5',
'K7P 3K5',
'K7P 3K5',
'K7P3H3',
'K7P 2P7',
'K7P 2W1',
'K7P 2G7',
'K7P 2G7',
'K7R3K6',
'K7p2p7 ',
'K7P2w2',
'K7P 3G3',
'K7M8T2',
'K7P 2W2',
'K7P 3K5',
'K7M6Z2',
'K7P2P7',
'K7M 5W7',
'K7p3b5',
'R8A0Y5 ',
'K7p2g9 ',
'K7p 1k4',
'K7P 2G8',
'K0H1G0 ',
'K7p 3K6 ',
'K7P 1K8',
'K7P 2G2',
'K7P 2G2',
'K7P3C7 ',
'Rainbows ',
'K7P1K4',
'K7M 2A2',
'K7P 0P1',
'K7P 3C5',
'K1V9N6',
'K7L4V3',
'K7m 6J6',
'K7P 3H3',
'K7P 1y9',
'K7k 3t4',
'K7L 5H6',
'K7P 2G3',
'K7P1A8',
'190975',
'K0H 1G0',
'K0H 1G0',
'K7k6w9 ',
'k7k2k2',
'KLO1LO',
'K7m7B4',
'K7P2W1 ',
'K0H1x0',
'K7p3h4',
'K0H1T0 ',
'K7M8W2 ',
'K0k2s0',
'K7P3K5',
'K7M2X5 ',
'K7P1L5',
'K7p0g9',
'K7k 6z9',
'K7P1L5',
'K7P1L1',
'K7P 1L1',
'K7P1L1',
'K7m8w2',
'K7P 0N2',
'K7P 1Y9',
'K7P 1Y9',
'K7p3k6 ',
'K7P3G5',
'K7p0b6',
'K7P 1N1',
'Yes make this so kids are safe this city is becoming disgusting and unsafe for our kids. ',
'K7P3K5',
'K7P3G8 ',
'K7P 0B7 ',
'K7K6W9',
'K7m8l2',
'K7p2s3',
'K7p1k4',
'K7P2H3',
'K7K-5T8',
'k7p2g2',
'K7P3H2',
'K7M 3X5',
'K7P 3H2',
'17p1l3',
'K7M 8y1',
'K7P2H9 ',
'K7K6Z9 ',
'K7M2A8 ',
'K7P1E4 ',
'K7A 4S5',
'K7P2G6',
'K7P2G6',
'K7l5a6',
'K7M7E5',
'K7P 0G8',
'K7P-3K3',
'K7P 0N2',
'K0H1M0',
'K7M8X4',
'K7L 2G6',
'K7L 2G6',
'K7P 2P7',
'K7p 0b6',
'K7M 6W7',
'K7P1Z1 ',
'K7p3g3',
'K7p1z7 ',
'K7P 2G6',
'K7m8l2',
'K7P 2G6',
'K0H2S0',
'K7P 1L3',
'K7P 1P5',
'K7P2R6',
'K7P 2G6',
'k7p2w4',
'K7p2v3',
'K7P 2G6',
'K7N 0A4',
'K7p 2w4',
'K7P 1L1',
'30905',
'K7p whw',
'K7P 2G6',
'K7P 2G6',
'K7P3K6',
'K7p1k4',
'K7P2W4 ',
'k0h2n0',
'N0G1M0',
'K7k4s6',
'N0G1M0',
'K7k4w1',
'K7P0B9',
'K7p0l6',
'K7P 3B6',
'K7m0a1',
'K7P 3H4',
'K7p3k5 ',
'T6K0R1',
'K7P 0G6',
'K7K7E4',
'K7N 1C1',
'K7p1b5 ',
'K7P 0C1',
'K7M8L1 ',
'K7m 1t9',
'K0H2S0',
'K0h2s0',
'K7M2X3',
'K7P3H2',
'K7p 2p7',
'K7p1n1',
'K7P2W3 ',
'B3M 2L1',
'K7P0L6',
'K7p2p7 ',
'K7m0b3',
'K0A1E0 ',
'K7k5z4 ',
'K1C 7P6',
'K8n3r9',
'K0K 3N0',
'K7p 2p9',
'K7P 2G9',
'K0h1g0',
'K7P1K9 ',
'K0K1J0',
'K7p2g7',
'K7N 1T1',
'K7m2w9',
'K7L 4V3',
'K7k5v4',
'K7P 1L3',
'K7M5H6 ',
'K7p3b5',
'K7p3b5',
'K7M4Y7',
'K0H 1S0',
'K7P1Z4 ',
'K0H 1S0',
'K7p3g5',
'K7k1y7 ',
'K7p 2w2',
'K0H 2L0',
'K7P 0C1',
'K7P 2W1',
'K7P 2W2',
'K7P 1Z2',
'K7P 3A8',
'K7P 3H5',
'K7p2l6 ',
'K7P 2K2',
'K7P3H3',
'K7K 5Y3',
'K7L5H6 ',
'K0H 1W0',
'k0k1z0',
'T1S 1B6',
'K7p 2r1',
'K7P 2Y9',
'K7p2g3',
'K7M7N9 ',
'K7P2W1',
'K7k3a2',
'k7m5m3',
'K7M2W9',
'K0k2a0 ',
'K7p1a1',
'K7m8m7',
'M5p1n6 ',
'K7P3H2',
'K7P3K6 ',
'k7p2g2','k7p2g2',
             'k7p2g3',
             'k7p2g3','k7p2g3','k7p2g3','k7p2g3',
             'k7p2g3','k7p2g3','k7p2g3','k7p2h8',
             'k7p2h8','k7p2h8','k7p2h6','k7p2h6','k7p2h9','k7p2h9',
             'k7p2g2','k7p2g2','k7p2g2','k7p2g2','k7p2g2','k7p2g2',
             'k7p2e9','k7p2e9','k7p2e8','k7p2e8','k7p2e8','k7p2e8',
             'k7p2e8','k7p2e8','k7p2e8','k7p2e8']



latitudes = []
longitudes = []
locations = []
apikey = 'googlemapapikey'
gmaps = googlemaps.Client(key=apikey)
gmap = gmplot.GoogleMapPlotter.from_geocode( "cataraqui woods park,kingston,on,canada", apikey, 16)
gmap.apikey = 'googlemapapikey'
park = gmaps.geocode("cataraqui woods park,kingston,on,canada")
latitude, longitude = park[0]['geometry']['location'].values()
park_cord = (latitude, longitude)
# gmap.marker(latitude,longitude, color='#FF0000', title="Cataraqui Woods Park")
counter = 1
diff = 0.0001
locs  = []
r = lambda: random.randint(0,255)
for pcode in postcodes:
    # print(f'original:{ pcode }')
    p = pcode.upper().replace(' ','')
    p = p.replace('-', '')
    matches  = re.match(r"^([A-Z][0-9][A-Z][0-9][A-Z][0-9]).*$", p)
    if not matches:
        continue
    p = matches.group(1)
    pp = f"{ p[:3] } { p[3:]}"
    # print(f'cleaned: { pp }')
    result = gmaps.geocode(pp)

    if not result:
        continue
    latitude, longitude = result[0]['geometry']['location'].values()
    sig_cord = (latitude, longitude)
    distance_to_park = distance.distance(park_cord, sig_cord).km
    # print(f'#{ counter } - geocode: { latitude }, { longitude }')
    print(f'#{ counter } - { pp } - { distance_to_park:.2f}km')
    counter += 1
    # latitudes.append(latitude)
    # longitudes.append(longitude)
    #################################
    # lat = latitude
    # long = longitude
    # color = '#41B7F7'
    # while (lat,long) in locs:
    #     lat = lat + diff
    #     long = long + diff
    #     color = '#{:02x}{:02x}{:02x}'.format(r(), r(), r())
    # locs.append((lat,long))
    # locations.append(f"{ str(latitude) }, { str(longitude)}")
    # # color = '#{:02x}{:02x}{:02x}'.format(r(), r(), r())
    # gmap.marker(lat,long, color=color, title=pp)
    # # gmap.marker(latitude,longitude, color=color, title=pp)
    #####################################
# gmap.heatmap(latitudes, longitudes,threshold=10,radius=300)
# gmap.draw('gmplot.html')
